name: CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  # Note: iOS build disabled until GitHub runners support iOS 26 SDK
  # The app targets iOS 26+ which requires Xcode 16.x beta with iOS 26 simulator
  # build-ios:
  #   name: Build iOS
  #   runs-on: macos-15
  #   steps:
  #     ...

  # Note: macOS build disabled until GitHub runners support macOS 26 SDK
  # The app targets macOS 26+ which requires Xcode 16.x beta with macOS 26 SDK
  # Current GitHub runners only have macOS SDK 15.0 which doesn't include required APIs
  # build-macos:
  #   name: Build macOS
  #   runs-on: macos-15
  #   steps:
  #     - name: Checkout
  #       uses: actions/checkout@v4
  #
  #     - name: Select Xcode
  #       run: sudo xcode-select -s /Applications/Xcode_16.app
  #
  #     - name: Show Xcode version
  #       run: xcodebuild -version
  #
  #     - name: Build macOS
  #       run: |
  #         xcodebuild build \
  #           -project StashMyStuff.xcodeproj \
  #           -scheme StashMyStuff \
  #           -destination 'platform=macOS' \
  #           -configuration Debug \
  #           CODE_SIGNING_ALLOWED=NO

  # Note: Tests disabled until GitHub runners support iOS 26 SDK
  # test:
  #   name: Run Tests
  #   runs-on: macos-15
  #   needs: [build-macos]
  #   steps:
  #     ...

  swiftlint:
    name: SwiftLint
    runs-on: macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install SwiftLint
        run: brew install swiftlint

      - name: Run SwiftLint
        run: swiftlint lint --reporter github-actions-logging
        # Note: Removed --strict flag to allow warnings during early development

  swiftformat:
    name: SwiftFormat Check
    runs-on: macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install SwiftFormat
        run: brew install swiftformat

      - name: Check SwiftFormat
        run: swiftformat --lint .
